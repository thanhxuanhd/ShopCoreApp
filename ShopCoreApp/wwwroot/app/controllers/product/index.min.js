var productController=function(){var t=function(){n()},i=function(){$("#ddlShowPage").on("change",function(){app.configs.pageSize=$(this).val();app.configs.pageIndex=1;n(!0)})},n=function(t){var u=$("#table-template").html(),i="";$.ajax({type:"GET",url:"/admin/product/GetAllPaging",data:{categoryId:null,keyword:$("#txtKeyword").val(),pageSize:app.configs.pageSize,page:app.configs.pageIndex},success:function(f){f&&f.Result&&$.each(f.Result,function(e,o){i+=Mustache.render(u,{Id:o.Id,Name:o.Name,CategoryName:o.ProductCategory.Name,Image:o.Image==null?'<img scr="/admin/images/user.png" width=25>':'<img scr="'+o.Image+'" width=25>',CreatedDate:app.dateFormatJson(o.DateCreated),Status:app.getStatus(o.Status),Price:app.formatNumber(o.Price)});$("#lblTotalRecords").text(f.RowCount);i!==""&&$("#tblContent").html(i);r(f.RowCount,function(){n()},t)})},error:function(n){console.log(n);app.notify("Cannot loading data","error");app.dateFormatJson()}})},r=function(n,t,i){var r=Math.ceil(n/app.configs.pageSize);($("#paginationUL a").length===0||i===!0)&&($("#paginationUL").empty(),$("#paginationUL").removeData("twbs-pagination"),$("#paginationUL").unbind("page"));$("#paginationUL").twbsPagination({totalPages:r,visiablePages:7,first:"First",prev:"Prev",next:"Next",last:"Last",onPageClick:function(n,i){app.configs.pageIndex=i;setTimeout(t(),200)}})};return{initailize:t,registerEvent:i}}();